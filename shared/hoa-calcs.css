/* ========= Hydro Oasis â€“ Shared Calculator Styles ========= */

/*
 * Base scope + design tokens
 * All calculators live inside an element with the .hoa-calc class, so we scope
 * the shared system there to avoid bleeding into the host theme.
 */
.hoa-calc {
  --bg:#FDFBF4;
  --bg-alt:#FFFFFF;
  --text:#333333;
  --heading:#2D5C4E;
  --link:#2D5C4E;
  --link-hover:#A76DAB;

  --btn:#2D5C4E;
  --btn-text:#FFFFFF;
  --btn-hover:#A76DAB;

  --card:#FFFFFF;
  --card-border:#E7E5DC;
  --icon:#2D5C4E;
  --err:#BE5C5C;

  --sec-border:#D9E2DE;
  --sec-head-bg:#F3F7F5;
  --sec-head-text:#2D5C4E;
  --tile-bg:#FFFFFF;
  --tile-border:#E7E5DC;
  --tile-label:#5C6F69;
  --tile-value:#2D5C4E;

  --font: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

  color: var(--text);
  background: var(--bg);
  padding: 16px;
}

.hoa-calc * {
  box-sizing: border-box;
  font-family: var(--font);
}

/* Shared layout shells */
.hoa-calc .wrap,
#water-calc .wrap,
#ncalc .wrap,
#harvestcalc .wrap,
#ventcalc .vc-wrap {
  max-width: 1100px;
  margin: 0 auto;
}

.hoa-calc .card {
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 16px;
  padding: 20px;
  margin: 18px 0;
  position: relative;
  overflow: hidden;
  box-shadow: 0 6px 20px rgba(0,0,0,.06);
}

.hoa-calc .with-watermark { position: relative; overflow: hidden; }

.hoa-calc .wm-img {
  position: absolute;
  right: -28px;
  bottom: -28px;
  width: 260px;
  opacity: .06;
  pointer-events: none;
  user-select: none;
  z-index: 0;
  filter: saturate(.95) contrast(.95);
}

@media (min-width: 768px) {
  .hoa-calc .wm-img { width: 320px; }
}

#ecalc .wm-img,
#ventcalc .wm-img { width: 220px; }
@media (min-width: 768px) {
  #ecalc .wm-img,
  #ventcalc .wm-img { width: 300px; }
}

/* Titles */
.hoa-calc .title-block {
  text-align: center;
  margin: 6px 0 10px;
  position: relative;
  z-index: 1;
}

.hoa-calc .title-block h1 {
  color: var(--heading);
  font-weight: 800;
  font-size: clamp(26px, 3.2vw, 36px);
  margin: 0;
  letter-spacing: .3px;
}

.hoa-calc .subtitle { color: #456E62; font-size: 14px; }

/* Section titles */
.hoa-calc .sec-title {
  color: var(--heading);
  font-weight: 800;
  font-size: 18px;
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 14px 0 12px;
  position: relative;
  z-index: 1;
}

.hoa-calc .dot {
  width: 18px;
  height: 18px;
  border-radius: 4px;
  background: var(--icon);
  display: inline-block;
}

/* Grid utilities */
.hoa-calc .grid { display: grid; gap: 14px; position: relative; z-index: 1; }
.hoa-calc .g-3 { grid-template-columns: repeat(3, 1fr); }
.hoa-calc .g-2 { grid-template-columns: repeat(2, 1fr); }

@media (max-width: 820px) {
  .hoa-calc .g-3,
  .hoa-calc .g-2 { grid-template-columns: 1fr; }
}

/* Inputs */
.hoa-calc label {
  display: block;
  font-size: 13px;
  color: #516A64;
  margin: 2px 0 6px;
}

.hoa-calc .input,
.hoa-calc select,
.hoa-calc input[type="number"],
.hoa-calc input[type="text"],
.hoa-calc input[type="time"],
.hoa-calc input[type="date"] {
  width: 100%;
  padding: 12px 12px;
  border-radius: 10px;
  border: 1px solid #D1D1D1;
  background: #fff;
  font-size: 16px;
  appearance: none;
  -webkit-appearance: none;
}

.hoa-calc select { cursor: pointer; }

.hoa-calc .input:focus,
.hoa-calc select:focus,
.hoa-calc input[type="number"]:focus,
.hoa-calc input[type="text"]:focus,
.hoa-calc input[type="time"]:focus,
.hoa-calc input[type="date"]:focus {
  outline: none;
  border-color: #B7C7C2;
  box-shadow: 0 0 0 3px rgba(45,92,78,.12);
}

.hoa-calc .help { font-size: 12px; color: #6B7C77; margin-top: 6px; }
.hoa-calc .error { border-color: var(--err) !important; }
.hoa-calc .error-msg { color: var(--err); font-size: 12px; margin: 8px 0; display: none; }
.hoa-calc .error-msg.show { display: block; }
.hoa-calc .hidden { display: none !important; }

/* Inline helpers */
.hoa-calc .center { text-align: center; }
.hoa-calc .inline { display: inline-flex; align-items: center; gap: 6px; }

/* Buttons */
.hoa-calc .btn {
  background: var(--btn);
  color: var(--btn-text);
  border: 1px solid var(--btn);
  border-radius: 12px;
  padding: 12px 18px;
  font-weight: 700;
  cursor: pointer;
  transition: .15s;
  position: relative;
  z-index: 1;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.hoa-calc .btn:hover { background: var(--btn-hover); border-color: var(--btn-hover); }
.hoa-calc .btn-ghost { background: #f3f5f1; color: #1f3b33; border-color: #d9e2de; }
.hoa-calc .btn-ghost:hover { background: #e8eee9; }
.hoa-calc .btn.remove,
.hoa-calc .remove { background: #ef4444; border-color: #ef4444; color: #fff; }
.hoa-calc .btn.remove:hover,
.hoa-calc .remove:hover { background: #dc2626; border-color: #dc2626; }

/* Results sections */
.hoa-calc .sec-card {
  border: 1px solid var(--sec-border);
  border-radius: 12px;
  padding: 12px;
  background: #fff;
  margin-top: 14px;
}

.hoa-calc .sec-head {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--sec-head-bg);
  color: var(--sec-head-text);
  padding: 8px 10px;
  border-radius: 9px;
  font-weight: 800;
  font-size: 14px;
}

.hoa-calc .sec-head .icon { font-size: 16px; line-height: 1; }

.hoa-calc .stats {
  display: grid;
  grid-template-columns: repeat(5, minmax(120px, 1fr));
  gap: 10px;
  padding: 10px 6px 6px;
}

@media (max-width: 980px) {
  .hoa-calc .stats { grid-template-columns: repeat(2, minmax(140px, 1fr)); }
}

@media (max-width: 560px) {
  .hoa-calc .stats { grid-template-columns: 1fr; }
}

.hoa-calc .stat {
  background: var(--tile-bg);
  border: 1px solid var(--tile-border);
  border-radius: 10px;
  padding: 10px 12px;
  text-align: center;
  box-shadow: 0 2px 6px rgba(0,0,0,.03);
}

.hoa-calc .stat .label {
  font-size: 12px;
  color: var(--tile-label);
  font-weight: 700;
  letter-spacing: .2px;
}

.hoa-calc .stat .value {
  margin-top: 4px;
  font-size: 18px;
  font-weight: 800;
  color: var(--tile-value);
}

/* Links */
.hoa-calc a { color: var(--link); text-decoration: none; }
.hoa-calc a:hover { color: var(--link-hover); }

/* Print clean-up */
@media print {
  .hoa-calc .wm-img { display: none !important; }
  .hoa-calc { background: #fff; padding: 0; }
  .hoa-calc .card { box-shadow: none; }
}

/* ===== Nutrient Cost Calculator ===== */
#ncalc .nutr-card,
#harvestcalc .week-card {
  background: #f8faf8;
  border: 1px solid #e2e7e4;
  border-radius: 12px;
  padding: 16px;
}

#ncalc .nutr-head,
#harvestcalc .week-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}

#ncalc .nutr-title,
#harvestcalc .week-title {
  font-weight: 700;
  color: #1f3b33;
}

/* Specific nutrient helpers */
#ncalc .btn-ghost,
#harvestcalc .btn-ghost { color: #1f3b33; }

/* Nutrient + Harvest stats overrides */
#ncalc .stats { grid-template-columns: repeat(5, minmax(120px, 1fr)); }
@media (max-width: 980px) {
  #ncalc .stats { grid-template-columns: repeat(2, minmax(140px, 1fr)); }
}
@media (max-width: 560px) {
  #ncalc .stats { grid-template-columns: 1fr; }
}

#harvestcalc .stats { grid-template-columns: repeat(4, minmax(140px, 1fr)); }
@media (max-width: 980px) {
  #harvestcalc .stats { grid-template-columns: repeat(2, minmax(140px, 1fr)); }
}
@media (max-width: 560px) {
  #harvestcalc .stats { grid-template-columns: 1fr; }
}

/* ===== Ventilation Calculator ===== */
#ventcalc .vc-sub { color: #456E62; margin-top: 6px; font-size: 14px; }

#ventcalc .inline-field { display: flex; gap: 8px; align-items: center; }
#ventcalc .inline-field .grow { flex: 1 1 auto; }
#ventcalc .inline-field .unit-select { flex: 0 0 96px; }
#ventcalc .unit-select select { text-align: center; padding-left: 0; padding-right: 0; font-weight: 700; }
@media (max-width: 390px) {
  #ventcalc .inline-field .unit-select { flex-basis: 86px; }
  #ventcalc input,
  #ventcalc select { font-size: 15px; }
}

#ventcalc .inline-options { display: flex; gap: 18px; flex-wrap: wrap; margin: 6px 0 10px; }
#ventcalc .inline-options label { display: flex; align-items: center; gap: 8px; font-size: 14px; cursor: pointer; }
#ventcalc input[type="radio"],
#ventcalc input[type="checkbox"] { width: 18px; height: 18px; }

#ventcalc .btn { padding: 14px 20px; font-size: 16px; min-width: 240px; }

#ventcalc .list { font-size: 14px; line-height: 1.5; }
#ventcalc .subhead { margin: 10px 0 6px; font-weight: 700; }
#ventcalc .pill { background: #F7FAF9; border: 1px solid var(--tile-border); padding: 10px 12px; border-radius: 10px; margin: 6px 0; font-weight: 700; }

#ventcalc .pick {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  border-radius: 10px;
  background: #FFFFFF;
  text-decoration: none;
  color: inherit;
  border: 1px solid var(--tile-border);
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}

#ventcalc .pick:hover { transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,0,0,.08); border-color: #d6d6d6; }
#ventcalc .pick:active { transform: translateY(0); box-shadow: 0 3px 10px rgba(0,0,0,.08); }

/* ===== Electricity Calculator ===== */
#ecalc { position: relative; background: var(--bg); color: var(--text); line-height: 1.6; }
#ecalc * { margin: 0; padding: 0; box-sizing: border-box; }
#ecalc .container {
  max-width: 1200px;
  margin: 20px auto;
  padding: 20px;
  background: var(--card);
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  border: 1px solid var(--card-border);
  position: relative;
  overflow: hidden;
}
#ecalc .container > * { position: relative; z-index: 2; }
#ecalc .wm-img { width: 220px; opacity: .06; pointer-events: none; user-select: none; filter: saturate(0.9) contrast(0.95); z-index: 1; }
#ecalc .header { text-align: center; padding: 40px 20px 32px; margin: 0 0 32px 0; }
#ecalc .header h1 { margin: 0 0 8px; font-size: clamp(26px, 3.2vw, 36px); font-weight: 800; color: #2D5C4E; line-height: 1.2; }
#ecalc .header .subtitle { font-size: 14px; font-weight: 400; color: #456E62; margin: 8px 0 0; line-height: 1.4; }
#ecalc .section { background: var(--card); border-radius: 12px; padding: 24px; margin-bottom: 24px; border: 1px solid var(--card-border); }
#ecalc .section-title { display: flex; font-size: 1.5rem; font-weight: 600; color: var(--heading); margin-bottom: 20px; align-items: center; gap: 8px; }
#ecalc .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
#ecalc .form-group,
#ecalc .input { display: flex; flex-direction: column; }
#ecalc .form-group label,
#ecalc .input label { font-weight: 500; margin-bottom: 8px; color: var(--text); }
#ecalc .form-group input,
#ecalc .form-group select,
#ecalc .input input,
#ecalc .input select { padding: 12px; border: 2px solid var(--card-border); border-radius: 8px; font-size: 16px; transition: border-color 0.2s; background: var(--card); color: var(--text); }
#ecalc .form-group input:focus,
#ecalc .form-group select:focus,
#ecalc .input input:focus,
#ecalc .input select:focus { outline: none; border-color: var(--heading); box-shadow: 0 0 0 3px rgba(45,92,78,0.1); }
#ecalc .toggle-container { display: flex; align-items: center; gap: 12px; margin-top: 16px; }
#ecalc .toggle { position: relative; width: 48px; height: 24px; background: #d1d5db; border-radius: 12px; cursor: pointer; transition: background-color 0.2s; }
#ecalc .toggle.active { background: var(--btn); }
#ecalc .toggle-slider { position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: var(--card); border-radius: 50%; transition: transform 0.2s; }
#ecalc .toggle.active .toggle-slider { transform: translateX(24px); }
#ecalc .btn { border: none; border-radius: 8px; font-weight: 500; padding: 12px 24px; white-space: nowrap; }
#ecalc .btn-primary { background: var(--btn); color: var(--btn-text); }
#ecalc .btn-primary:hover { background: var(--btn-hover); transform: translateY(-1px); }
#ecalc .btn-secondary { background: #6b7280; color: var(--btn-text); }
#ecalc .btn-secondary:hover { background: #4b5563; }
#ecalc .btn-success { background: #10b981; color: var(--btn-text); }
#ecalc .btn-success:hover { background: #059669; }
#ecalc .btn-danger { background: var(--err); color: var(--btn-text); }
#ecalc .btn-danger:hover { background: #a04545; }
#ecalc .equipment-card { background: var(--card); border: 2px solid var(--card-border); border-radius: 12px; padding: 24px; margin-bottom: 16px; position: relative; }
#ecalc .equipment-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
#ecalc .equipment-title { font-size: 1.25rem; font-weight: 600; color: var(--heading); }
#ecalc .remove-btn { position: absolute; top: 16px; right: 16px; background: var(--err); color: var(--btn-text); border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; }
#ecalc .time-range { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; padding: 12px; background: var(--bg); border-radius: 8px; border: 1px solid var(--card-border); }
#ecalc .time-input { padding: 8px; border: 1px solid var(--card-border); border-radius: 6px; font-size: 14px; background: var(--card); color: var(--text); }
#ecalc .days-selector { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
#ecalc .day-btn { padding: 8px 12px; border: 2px solid var(--card-border); background: var(--card); border-radius: 6px; cursor: pointer; font-size: 14px; transition: all 0.2s; color: var(--text); }
#ecalc .day-btn.active { background: var(--btn); color: var(--btn-text); border-color: var(--btn); }
#ecalc .results-section { background: var(--card); border: 2px solid var(--heading); border-radius: 12px; padding: 24px; margin-top: 24px; }
#ecalc .results-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-top: 16px; }
#ecalc .result-item { background: var(--bg); padding: 16px; border-radius: 8px; text-align: center; border: 1px solid var(--card-border); }
#ecalc .result-label { font-size: 14px; color: var(--text); margin-bottom: 4px; opacity: 0.7; }
#ecalc .result-value { font-size: 18px; font-weight: 600; color: var(--heading); }
#ecalc .error-message { background: #fef2f2; border: 1px solid var(--err); color: var(--err); padding: 12px; border-radius: 8px; margin-top: 12px; font-size: 14px; }
#ecalc .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1000; }
#ecalc .modal.show { display: flex; }
#ecalc .modal-content { background: var(--card); padding: 32px; border-radius: 12px; max-width: 500px; width: 90%; max-height: 80%; overflow-y: auto; border: 1px solid var(--card-border); position: relative; z-index: 1001; }
#ecalc .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
#ecalc .modal-title { font-size: 1.5rem; font-weight: 600; color: var(--heading); }
#ecalc .close-btn { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--text); }
#ecalc .loading { opacity: 0.6; pointer-events: none; }
@media (min-width: 768px) { #ecalc .wm-img { width: 300px; } }
@media (max-width: 768px) {
  #ecalc .container { margin: 10px; padding: 16px; }
  #ecalc .header { padding: 30px 16px 20px; margin: 0 0 20px 0; }
  #ecalc .form-grid { grid-template-columns: 1fr; gap: 16px; }
  #ecalc .time-range { flex-direction: column; align-items: stretch; gap: 8px; }
  #ecalc .time-range span { text-align: center; font-weight: 500; }
  #ecalc .days-selector { gap: 6px; }
  #ecalc .day-btn { padding: 6px 10px; font-size: 13px; }
  #ecalc .results-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; }
  #ecalc .result-item { padding: 12px; }
  #ecalc .result-value { font-size: 16px; }
  #ecalc .btn { padding: 10px 16px; font-size: 14px; }
  #ecalc .modal-content { padding: 20px; margin: 10px; }
  #ecalc .section { padding: 16px; }
  #ecalc .equipment-card { padding: 16px; }
}
@media (max-width: 480px) {
  #ecalc .header h1 { font-size: 1.7rem; }
  #ecalc .header .subtitle { font-size: 0.85rem; }
  #ecalc .section-title { font-size: 1.2rem; }
  #ecalc .results-grid { grid-template-columns: 1fr 1fr; }
  #ecalc .days-selector { justify-content: center; }
  #ecalc .time-range .btn-danger { padding: 2px 6px; font-size: 10px; }
}

/* ===== Nutrient Program Calculator ===== */
#nutriprog,
#nutriprog * { font-family: 'Nunito', sans-serif; }

#nutriprog {
  position: relative;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  padding: 40px 20px;
}

#nutriprog * { box-sizing: border-box; }
#nutriprog .container { max-width: 1400px; margin: 0 auto; }
#nutriprog .calc-shell {
  position: relative;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 14px;
  box-shadow: 0 2px 8px rgba(49,71,58,.08);
  padding: 28px 24px 34px;
  overflow: hidden;
}
#nutriprog .mascot-watermark {
  position: absolute;
  right: 14px;
  bottom: 14px;
  width: min(160px, 20%);
  opacity: .12;
  pointer-events: none;
  user-select: none;
  -webkit-user-drag: none;
  filter: drop-shadow(0 1px 0 rgba(0,0,0,.02));
}
@media (max-width: 600px) { #nutriprog .mascot-watermark { width: 96px; opacity: .14; } }
#nutriprog .calc-title {
  font-family: 'Inter', system-ui, sans-serif;
  font-weight: 800;
  letter-spacing: .2px;
  color: var(--heading);
  text-align: center;
  margin: 4px 0 6px 0;
  font-size: clamp(28px,4vw,40px);
}
#nutriprog .calc-subtitle {
  text-align: center;
  color: #56645d;
  font-family: 'Inter', system-ui, sans-serif;
  font-weight: 500;
  font-size: clamp(12px,2.1vw,14px);
  margin: 0 0 24px 0;
}
#nutriprog .config-section { margin: 10px 0 24px; text-align: center; }
#nutriprog .config-section label { display: block; font-weight: 700; color: var(--heading); margin-bottom: 10px; font-size: 1.05em; }
#nutriprog .config-section select {
  padding: 12px 20px;
  font-size: 1em;
  background: #fff;
  border: 1px solid #c4c8b8;
  border-radius: 10px;
  color: #31473a;
  min-width: 300px;
  cursor: pointer;
}
#nutriprog .config-section select:focus { outline: none; border-color: var(--heading); }
#nutriprog .stages-container { display: flex; flex-direction: column; gap: 28px; margin-bottom: 28px; }
#nutriprog .stage { background: #f7f5eb; padding: 24px; border-radius: 14px; box-shadow: 0 2px 8px rgba(49,71,58,.08); }
#nutriprog .stage-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }
#nutriprog .stage-title { font-size: 1.6em; font-weight: 800; color: var(--heading); margin: 0; }
#nutriprog .add-week-btn { background: var(--btn); color: #fff; border: none; padding: 10px 18px; border-radius: 20px; font-weight: 700; cursor: pointer; }
#nutriprog .add-week-btn:hover { background: #48685b; }
#nutriprog .week-card { background: #fcfaf3; border-radius: 12px; padding: 18px; margin-bottom: 16px; border: 1px solid #e3e2d7; box-shadow: 0 2px 6px rgba(49,71,58,.06); }
#nutriprog .week-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
#nutriprog .week-title { font-size: 1.25em; font-weight: 800; color: var(--heading); margin: 0; }
#nutriprog .week-controls { display: flex; gap: 8px; align-items: center; }
#nutriprog .toggle-btn,
#nutriprog .remove-week-btn { border: none; padding: 6px 12px; border-radius: 10px; font-weight: 700; cursor: pointer; font-size: .85em; }
#nutriprog .toggle-btn { background: #e3e2d7; color: var(--heading); }
#nutriprog .toggle-btn:hover { background: #d5d4c9; }
#nutriprog .remove-week-btn { background: #b54848; color: #fff; }
#nutriprog .remove-week-btn:hover { background: #a03d3d; }
#nutriprog .week-body { display: block; }
#nutriprog .week-body.hidden { display: none; }
#nutriprog .product-row { background: #fff; border: 1px solid #dddcd2; border-radius: 8px; padding: 14px; margin-bottom: 10px; box-shadow: 0 2px 4px rgba(49,71,58,.06); }
#nutriprog .product-fields { display: grid; grid-template-columns: 1fr 1fr auto; gap: 12px; align-items: end; }
@media (max-width: 700px) { #nutriprog .product-fields { grid-template-columns: 1fr; } }
#nutriprog .field-group { display: flex; flex-direction: column; }
#nutriprog .field-group label { font-weight: 700; color: var(--heading); margin-bottom: 6px; font-size: .95em; }
#nutriprog .field-group input { padding: 10px 12px; font-size: 1em; background: #fff; border: 1px solid #c4c8b8; border-radius: 8px; color: #31473a; }
#nutriprog .remove-product-btn { background: #b03d3c; color: #fff; border: none; padding: 10px 14px; border-radius: 8px; font-weight: 700; cursor: pointer; }
#nutriprog .add-product-btn { background: transparent; color: var(--heading); border: 2px dashed #c4c8b8; padding: 10px 14px; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; margin-top: 8px; }
#nutriprog .add-product-btn:hover { border-color: var(--heading); background: rgba(53,88,74,.05); }
#nutriprog .reservoir-section { background: #f7f5eb; padding: 24px; border-radius: 14px; margin-bottom: 24px; box-shadow: 0 2px 8px rgba(49,71,58,.08); }
#nutriprog .reservoir-section label { display: block; font-weight: 800; color: var(--heading); margin-bottom: 10px; font-size: 1.1em; }
#nutriprog .reservoir-section input { padding: 12px 16px; font-size: 1.05em; background: #fff; border: 1px solid #c4c8b8; border-radius: 10px; color: #31473a; max-width: 300px; width: 100%; }
#nutriprog .calculate-btn,
#nutriprog .download-btn { background: var(--btn); color: #fff; border: none; padding: 14px 36px; border-radius: 12px; font-weight: 800; cursor: pointer; font-size: 1.1em; display: block; margin: 26px auto; box-shadow: 0 4px 12px rgba(53,88,74,.2); }
#nutriprog .calculate-btn:hover,
#nutriprog .download-btn:hover { background: #48685b; }
#nutriprog .error-message { color: var(--err); font-weight: 800; text-align: center; margin: 18px 0; font-size: 1.05em; }
#nutriprog .results-section { margin-top: 28px; }
#nutriprog .stage-results { background: #f7f5eb; padding: 24px; border-radius: 14px; margin-bottom: 24px; box-shadow: 0 2px 8px rgba(49,71,58,.08); }
#nutriprog .stage-results h2 { font-size: 1.5em; font-weight: 800; color: var(--heading); margin: 0 0 18px 0; text-align: center; }
#nutriprog .feed-chart-matrix { overflow-x: auto; border-radius: 10px; border: 1px solid #c4c8b8; background: #fff; }
#nutriprog .feed-chart-matrix table { width: 100%; border-collapse: collapse; background: #fff; }
#nutriprog .feed-chart-matrix th,
#nutriprog .feed-chart-matrix td { border: 1px solid #c4c8b8; padding: 12px; text-align: center; vertical-align: middle; }
#nutriprog .feed-chart-matrix thead th { position: sticky; top: 0; z-index: 8; background: var(--heading); color: #fff; font-weight: 800; }
#nutriprog .matrix-week-header { min-width: 120px; white-space: nowrap; }
#nutriprog .matrix-nutrient-header { text-align: left; min-width: 200px; position: sticky; left: 0; z-index: 12; }
#nutriprog .matrix-nutrient-name { background: #f7f5eb; font-weight: 700; text-align: left; color: var(--heading); min-width: 200px; position: sticky; left: 0; z-index: 10; border-right: 2px solid #c4c8b8; }
#nutriprog .matrix-total-row { font-weight: 700; background: rgba(45,92,78,.08); }
#nutriprog .matrix-total-label { text-align: right; padding-right: 16px; }
#nutriprog .matrix-footer { margin-top: 18px; font-size: .9em; color: #5f6a62; text-align: center; }
#nutriprog .legend { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin: 16px 0; }
#nutriprog .legend-item { display: flex; align-items: center; gap: 8px; background: #fff; border: 1px solid #dcdacb; border-radius: 10px; padding: 8px 12px; font-weight: 600; color: #4a5a51; }
#nutriprog .legend-swatch { width: 18px; height: 18px; border-radius: 4px; background: var(--heading); opacity: .2; }
#nutriprog .notes { font-size: .95em; color: #4a5a51; margin-top: 18px; line-height: 1.5; }
#nutriprog .notes strong { color: var(--heading); }
@media (max-width: 960px) {
  #nutriprog { padding: 28px 16px; }
  #nutriprog .calc-shell { padding: 24px 18px 32px; }
  #nutriprog .stage { padding: 20px; }
  #nutriprog .reservoir-section { padding: 20px; }
}
@media (max-width: 640px) {
  #nutriprog .config-section select { min-width: 0; width: 100%; }
  #nutriprog .stage-header { flex-direction: column; gap: 12px; align-items: flex-start; }
  #nutriprog .week-header { flex-direction: column; gap: 10px; align-items: flex-start; }
  #nutriprog .calculate-btn,
  #nutriprog .download-btn { width: 100%; }
}

/* View transition opt-in */
@view-transition { navigation: auto; }
